{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/need-list":{"get":{"operationId":"NeedListController_findAll","parameters":[{"name":"sort","required":false,"in":"query","description":"Sort the need lists by specific fields","schema":{"example":"created_at:desc","type":"string"}},{"name":"startAfter","required":false,"in":"query","description":"Pagination cursor (values from the last itemâ€™s sort fields)","schema":{"example":"150,2025-10-18T14:23:00Z","type":"string"}},{"name":"limit","required":false,"in":"query","description":"Limit the number of results returned","schema":{"example":10,"type":"number"}}],"responses":{"200":{"description":"Successfully retrieved need lists.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AllNeedListsDto"}}}}}},"tags":["NeedList"]},"post":{"operationId":"NeedListController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateNeedListDto"}}}},"responses":{"201":{"description":"Create a new need list"}},"tags":["NeedList"]}},"/need-list/{id}":{"get":{"operationId":"NeedListController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Get one need list by ID"}},"tags":["NeedList"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":""}},"tags":["Auth"]}},"/users/register":{"post":{"operationId":"UserController_registerUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUserDto"}}}},"responses":{"201":{"description":"User successfully registered."}},"summary":"Register a new user","tags":["Users"]}},"/users/me":{"get":{"operationId":"UserController_getCurrentUser","parameters":[],"responses":{"200":{"description":"Returns current user profile."},"401":{"description":"No or invalid authentication token."},"404":{"description":"User profile not found."}},"security":[{"bearer":[]}],"summary":"Get profile of the currently authenticated user","tags":["Users"]}},"/donations/checkout-intent":{"post":{"operationId":"StripeController_createIntent","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentDto"}}}},"responses":{"201":{"description":"Payment intent created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentIntentResponseDto"}}}},"400":{"description":"Invalid payment data or validation error"},"500":{"description":"Payment provider configuration error"}},"tags":["Donations"]}},"/donations/{donation_id}/status":{"get":{"operationId":"StripeController_getDonationStatus","parameters":[{"name":"donation_id","required":true,"in":"path","description":"The unique donation ID","schema":{"example":"donation_ca-abc123def456","type":"string"}}],"responses":{"200":{"description":"Donation status retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DonationStatusResponseDto"}}}},"404":{"description":"Donation not found"}},"tags":["Donations"]}},"/donations/{donation_id}/payment-info":{"get":{"operationId":"StripeController_getPaymentInfo","parameters":[{"name":"donation_id","required":true,"in":"path","description":"The unique donation ID","schema":{"example":"donation_ca-abc123def456","type":"string"}}],"responses":{"200":{"description":"Payment information retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentInfoResponseDto"}}}},"404":{"description":"Donation not found"}},"tags":["Donations"]}},"/stripe/webhookUs":{"post":{"operationId":"StripeWebhookController_handleStripeWebhookUs","parameters":[{"name":"stripe-signature","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["StripeWebhook"]}},"/stripe/webhookCa":{"post":{"operationId":"StripeWebhookController_handleStripeWebhookCa","parameters":[{"name":"stripe-signature","required":true,"in":"header","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["StripeWebhook"]}}},"info":{"title":"Company API","description":"NeedList.ORG Swagger API documentation","version":"1.0","contact":{}},"tags":[],"servers":[{"url":"/api"}],"components":{"schemas":{"AllNeedListsDto":{"type":"object","properties":{"id":{"type":"string","example":"nL1234567890abcdef"},"needlist_name":{"type":"string","example":"Food Donation Drive"},"needlist_status":{"type":"string","example":"Draft"},"total_donated":{"type":"number","example":0},"total_items":{"type":"number","example":0},"total_price":{"type":"number","example":0},"total_tax":{"type":"number","example":0},"due_date":{"type":"string","example":"2025-10-21T14:33:13.507Z"},"created_at":{"type":"string","example":"2025-10-21T14:33:13.507Z"},"last_updated":{"type":"string","example":"2025-10-21T14:33:13.507Z"},"user_id":{"type":"object","example":"/users/abc123"},"org_id":{"type":"object","example":"/organization/xyz456"},"location_id":{"type":"object","example":"/locations/lmno789"},"group_id":{"type":"object","example":["/groups/documentreference","/groups/documentreference"]}},"required":["id","needlist_name","needlist_status","total_donated","total_items","total_price","total_tax","due_date","created_at","last_updated","user_id","org_id","location_id","group_id"]},"CreateNeedListDto":{"type":"object","properties":{"needlist_name":{"type":"string","example":"Food Donation Drive"},"needlist_status":{"type":"string","example":"Draft"},"total_donated":{"type":"number","example":0},"total_items":{"type":"number","example":0},"total_price":{"type":"number","example":0},"total_tax":{"type":"number","example":0},"due_date":{"type":"string","example":"Sep 30, 2025"},"group_id":{"type":"object","example":["/groups/i5bu4dnoSy...","/groups/aB12cdEfG..."]},"org_id":{"type":"object","example":"/organization/U63tWq..."},"user_id":{"type":"object","example":"/users/RzKs6he1..."},"location_id":{"type":"object","example":"/locations/dL34sP..."},"created_at":{"type":"string","example":"2023-10-01T12:00:00Z"},"last_updated":{"type":"string","example":"2023-10-01T12:00:00Z"}},"required":["needlist_name","needlist_status","total_donated","total_items","total_price","total_tax","due_date","group_id","org_id","user_id","location_id"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string","description":"The user's email address"},"password":{"type":"string","description":"The user's password"}},"required":["email","password"]},"RegisterUserDto":{"type":"object","properties":{"user_email":{"type":"string","description":"The user's email address"},"password":{"type":"string","description":"The user's password"}},"required":["user_email","password"]},"CurrencyNameDto":{"type":"object","properties":{"_tag":{"type":"string","example":"CurrencyName"},"value":{"type":"string","example":"USD"}},"required":["_tag","value"]},"CurrencyAmountDto":{"type":"object","properties":{"_tag":{"type":"string","example":"CurrencyAmount"},"value":{"type":"number","example":100}},"required":["_tag","value"]},"MoneyAmountDto":{"type":"object","properties":{"currency":{"$ref":"#/components/schemas/CurrencyNameDto"},"amount":{"$ref":"#/components/schemas/CurrencyAmountDto"}},"required":["currency","amount"]},"DonorAddressDto":{"type":"object","properties":{"street":{"type":"string","example":"123 Test Drive"},"city":{"type":"string","example":"Toronto"},"province_state":{"type":"string","example":"Ontario"},"zip_postal_code":{"type":"string","example":"M4E1Z2"},"country":{"type":"string","example":"Canada"}},"required":["street","city","province_state","zip_postal_code","country"]},"DonorDto":{"type":"object","properties":{"anonymous":{"type":"boolean","example":false},"full_name":{"type":"string","example":"John Doe"},"email":{"type":"string","example":"john@example.com"},"address":{"$ref":"#/components/schemas/DonorAddressDto"}},"required":["anonymous","full_name","email","address"]},"CreatePaymentDto":{"type":"object","properties":{"total_amount":{"$ref":"#/components/schemas/MoneyAmountDto"},"receipt_country":{"type":"string","example":"Canada"},"payment_method":{"type":"string","example":"card"},"donor":{"$ref":"#/components/schemas/DonorDto"}},"required":["total_amount","receipt_country","payment_method","donor"]},"CreatePaymentIntentResponseDto":{"type":"object","properties":{"clientSecret":{"type":"string","example":"pi_3QRxyz123456789_secret_abc123def456","description":"The client secret for the payment intent, used to complete the payment on the client side"},"paymentId":{"type":"string","example":"pi_3QRxyz123456789","description":"The Stripe payment intent ID"},"txn_id":{"type":"string","example":"donation_ca-abc123def456","description":"The unique donation ID generated by NeedList.ORG"}},"required":["clientSecret","paymentId","txn_id"]},"DonationStatusResponseDto":{"type":"object","properties":{"status":{"type":"string","example":"processing","description":"The current status of the donation","enum":["processing","succeeded","failed","canceled"]}},"required":["status"]},"PaymentInfoResponseDto":{"type":"object","properties":{"txn_id":{"type":"string","example":"txn_id_ca-abc123def456","description":"The unique log ID for this donation"},"status":{"type":"string","example":"processing","description":"The current status of the donation","enum":["processing","succeeded","failed","canceled"]},"donated_amount":{"$ref":"#/components/schemas/MoneyAmountDto"},"payment_provider_fee":{"$ref":"#/components/schemas/MoneyAmountDto"},"payment_id":{"type":"string","example":"pi_3QRxyz123456789","description":"The Stripe payment intent ID"},"total_tax_deductible":{"$ref":"#/components/schemas/MoneyAmountDto"},"total_amount":{"$ref":"#/components/schemas/MoneyAmountDto"}},"required":["txn_id","status","donated_amount","payment_provider_fee","payment_id","total_tax_deductible","total_amount"]}}}}